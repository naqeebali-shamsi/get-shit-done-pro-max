---
phase: 08-documentation-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
autonomous: true

must_haves:
  truths:
    - "User can find Claude Desktop setup instructions in README"
    - "User can copy configuration template and start using RLM tools"
    - "User can see input/output examples for each MCP tool"
    - "User can diagnose and fix Qdrant/Ollama/collection issues using troubleshooting guide"
  artifacts:
    - path: "README.md"
      provides: "MCP server documentation section"
      contains: "## MCP Server for Claude Desktop"
  key_links:
    - from: "README.md"
      to: "claude_desktop_config.json"
      via: "configuration template code blocks"
      pattern: "mcpServers.*rlm"
---

<objective>
Add comprehensive MCP server documentation to README enabling self-service Claude Desktop setup.

Purpose: Users should be able to configure Claude Desktop to use RLM MCP server without external help. This completes the v1.1 milestone by making the MCP server discoverable and usable.

Output: README.md updated with MCP section including setup instructions, tool reference, configuration templates, and troubleshooting guide.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-documentation-integration/08-CONTEXT.md
@.planning/phases/08-documentation-integration/08-RESEARCH.md
@README.md
@src/rlm/mcp/server.ts
@src/rlm/mcp/tools/search.ts
@src/rlm/mcp/tools/index-code.ts
@src/rlm/mcp/tools/status.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add MCP Server section with setup and tool reference</name>
  <files>README.md</files>
  <action>
Add a new section "## MCP Server for Claude Desktop" after the "Troubleshooting" section (before Star History).

Structure the section as follows:

1. **Overview paragraph** - Brief explanation that GSD includes an MCP server exposing RLM codebase intelligence to Claude Desktop.

2. **Prerequisites** - List with copy-paste commands:
   - Docker (for Qdrant): `docker run -d -p 6333:6333 qdrant/qdrant`
   - Ollama with embedding model: `ollama pull nomic-embed-text`

3. **Claude Desktop Configuration** - Show the configuration file location for each platform:
   - macOS: `~/Library/Application Support/Claude/claude_desktop_config.json`
   - Windows: `%APPDATA%\Claude\claude_desktop_config.json`
   - Linux: `~/.config/Claude/claude_desktop_config.json`

4. **Minimal Configuration** - Code block with minimal working config (macOS/Linux):
```json
{
  "mcpServers": {
    "rlm": {
      "command": "npx",
      "args": ["-y", "get-shit-done-cc", "rlm-mcp"]
    }
  }
}
```

5. **Windows Configuration** - Separate code block showing Windows-specific config with cmd wrapper:
```json
{
  "mcpServers": {
    "rlm": {
      "command": "cmd",
      "args": ["/c", "npx", "-y", "get-shit-done-cc", "rlm-mcp"]
    }
  }
}
```

6. **Available Tools** - Compact table format per CONTEXT.md:
| Tool | Description | Input | Output |
|------|-------------|-------|--------|
| `search_code` | Search indexed codebase | `query` (string), `limit` (number, default 5) | Code chunks with file paths and line numbers |
| `index_code` | Index a directory for searching | `path` (string) | Summary: files indexed, skipped, errors |
| `get_status` | Check system status | none | Qdrant status, collection info, chunk count |

7. **Quick Start** - Numbered steps:
   1. Start Qdrant: `docker run -d -p 6333:6333 qdrant/qdrant`
   2. Start Ollama: `ollama serve` (if not running)
   3. Add config to claude_desktop_config.json
   4. Restart Claude Desktop
   5. Use `get_status` to verify connection
   6. Use `index_code` to index your project
   7. Use `search_code` to query your codebase

Use consistent formatting with the rest of README (same heading levels, code block styles, table formatting).
  </action>
  <verify>
    - README.md contains "## MCP Server for Claude Desktop" heading
    - Configuration templates for macOS/Linux and Windows are present
    - Tool reference table includes all three tools
    - Quick Start section has numbered steps
  </verify>
  <done>MCP setup instructions and tool reference added to README</done>
</task>

<task type="auto">
  <name>Task 2: Add troubleshooting guide and environment variables</name>
  <files>README.md</files>
  <action>
Continue the MCP Server section by adding troubleshooting subsection.

Add after Quick Start:

1. **Environment Variables** - Table showing configurable env vars:
| Variable | Default | Purpose |
|----------|---------|---------|
| `QDRANT_URL` | `http://localhost:6333` | Qdrant server endpoint |
| `OLLAMA_HOST` | `http://localhost:11434` | Ollama server endpoint |
| `RLM_COLLECTION` | `rlm_chunks` | Qdrant collection name |

Show example config with custom env vars:
```json
{
  "mcpServers": {
    "rlm": {
      "command": "npx",
      "args": ["-y", "get-shit-done-cc", "rlm-mcp"],
      "env": {
        "QDRANT_URL": "http://localhost:6333",
        "OLLAMA_HOST": "http://localhost:11434"
      }
    }
  }
}
```

2. **Troubleshooting** subsection using diagnostic flow format per CONTEXT.md:

**Qdrant unavailable**
```
Check: curl http://localhost:6333/collections
  Returns JSON? → Qdrant is running
  Connection refused? → Start Qdrant: docker run -d -p 6333:6333 qdrant/qdrant
```

**Ollama missing**
```
Check: curl http://localhost:11434/api/tags
  Returns JSON? → Ollama is running, check embedding model
  Connection refused? → Start Ollama: ollama serve

Check: ollama list | grep nomic-embed-text
  Found? → Model ready
  Not found? → Pull model: ollama pull nomic-embed-text
```

**Collection not found / 0 results**
```
Check: Use get_status tool in Claude Desktop
  Shows "0 chunks indexed"? → Index codebase: use index_code tool with path
```

3. **Viewing Logs** - Brief section on log locations:
- macOS: `~/Library/Logs/Claude/mcp*.log`
- Windows: `%APPDATA%\Claude\logs\mcp*.log`
- Or: Claude Desktop → Settings → Developer → (select rlm) → Open Logs

Keep troubleshooting minimal per CONTEXT.md - one-liner per diagnostic step, covers only the three core scenarios.
  </action>
  <verify>
    - Environment variables table present with QDRANT_URL, OLLAMA_HOST, RLM_COLLECTION
    - Troubleshooting section covers Qdrant, Ollama, and collection scenarios
    - Diagnostic flow format used (Check → condition → action)
    - Log locations documented for macOS and Windows
  </verify>
  <done>Troubleshooting guide and environment variables documented in README</done>
</task>

</tasks>

<verification>
After completing all tasks:
1. README.md contains complete MCP Server section
2. `grep -c "mcpServers" README.md` returns at least 3 (config examples)
3. All three tools documented in table
4. Platform-specific configs for macOS/Linux and Windows
5. Troubleshooting covers Qdrant, Ollama, collection issues
</verification>

<success_criteria>
- [ ] README includes step-by-step Claude Desktop setup instructions with configuration template
- [ ] Each MCP tool has documented usage examples showing input/output
- [ ] Troubleshooting guide covers common issues: Qdrant unavailable, Ollama missing, collection not found
- [ ] Users can copy claude_desktop_config.json template and start using RLM tools immediately
</success_criteria>

<output>
After completion, create `.planning/phases/08-documentation-integration/08-01-SUMMARY.md`
</output>
